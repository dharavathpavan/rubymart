<div class="container py-5">
  <h2 class="fw-bold mb-4">Your Orders</h2>
  
  <% if @orders.empty? %>
    <p class="text-muted">You haven't placed any orders yet.</p>
  <% else %>
    <div class="accordion" id="ordersAccordion">
      <% @orders.each do |order| %>
        <div class="accordion-item mb-3 border rounded shadow-sm overflow-hidden">
          <h2 class="accordion-header" id="heading<%= order.id %>">
            <button class="accordion-button collapsed bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapse<%= order.id %>">
              <div class="d-flex justify-content-between w-100 me-3 align-items-center">
                <span>
                  <strong>Order #<%= order.id %></strong>
                  <span class="text-muted ms-2"><%= order.created_at.strftime("%B %d, %Y") %></span>
                </span>
                <div>
                   <span class="badge bg-<%= order.status == 'paid' ? 'success' : 'secondary' %> me-3"><%= order.status.humanize %></span>
                   <span class="fw-bold">$<%= order.total_price %></span>
                </div>
              </div>
            </button>
          </h2>
          <div id="collapse<%= order.id %>" class="accordion-collapse collapse" data-bs-parent="#ordersAccordion">
            <div class="accordion-body">
              <table class="table">
                <thead>
                  <tr>
                    <th>Product</th>
                    <th>Price</th>
                    <th>Qty</th>
                    <th class="text-end">Total</th>
                  </tr>
                </thead>
                <tbody>
                  <% order.order_items.each do |item| %>
                    <tr>
                      <td><%= item.product.name %></td>
                      <td>$<%= item.product.price %></td>
                      <td><%= item.quantity %></td>
                      <td class="text-end">$<%= item.total_price %></td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
